/* Mobile-Only Styles - Apple-Inspired Complete Redesign */
@media (max-width: 768px) and (orientation: portrait), 
       (max-width: 1024px) and (orientation: landscape) and (pointer: coarse) {
  
  html, body {
    overflow-x: hidden !important;
    -webkit-overflow-scrolling: touch;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    max-width: 100vw !important;
    box-sizing: border-box !important;
    position: relative !important;
  }

  /* Prevent horizontal scroll on all elements */
  * {
    max-width: 100% !important;
    box-sizing: border-box !important;
  }

  /* Force all containers to respect viewport width */
  body, main, section, div, header, nav {
    max-width: 100vw !important;
    overflow-x: hidden !important;
  }

  /* Ultimate horizontal scroll prevention */
  html {
    overflow-x: hidden !important;
    width: 100% !important;
  }

  body {
    overflow-x: hidden !important;
    width: 100% !important;
    margin: 0 !important;
    padding: 0 !important;
  }

  /* Mobile Header Enhancements */
  header {
    backdrop-filter: blur(20px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
    height: clamp(68px, 12vh, 84px) !important;
    width: 100vw !important;
    max-width: 100vw !important;
    left: 0 !important;
    right: 0 !important;
    overflow-x: hidden !important;
  }

  /* Mobile Header Content Container */
  header > div {
    height: clamp(68px, 12vh, 84px) !important;
    padding: 0 1.5rem !important;
    width: 100% !important;
    max-width: 100vw !important;
    box-sizing: border-box !important;
    overflow-x: hidden !important;
  }
  
  header[class*="bg-white"] {
    background: rgba(255, 255, 255, 0.95) !important;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1) !important;
  }

  [data-theme='dark'] header[class*="bg-white"] {
    background: rgba(28, 28, 30, 0.95) !important;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1) !important;
  }

  /* Mobile Hero Section - Fix Header Overlap */
  section#hero {
    padding-top: clamp(120px, 20vh, 140px) !important;
    padding-bottom: clamp(2rem, 8vw, 4rem) !important;
  }

  section#hero.section {
    padding-top: clamp(120px, 20vh, 140px) !important;
    padding-bottom: clamp(2rem, 8vw, 4rem) !important;
  }

  /* Mobile Hero Content */
  section#hero h1 {
    font-size: clamp(2.25rem, 8vw, 3rem) !important;
    line-height: 1.1 !important;
    margin-bottom: 1.5rem !important;
  }

  section#hero p {
    font-size: clamp(1.0625rem, 4vw, 1.25rem) !important;
    line-height: 1.5 !important;
    margin-bottom: 2rem !important;
  }

  /* Mobile Header Logo */
  header div[style*="fontSize"] {
    font-size: 1.75rem !important;
    font-weight: 700 !important;
    color: var(--text-primary) !important;
  }

  /* Mobile Header Spacing Improvements */
  /* Moved to header > div above */
  
  /* Mobile Logo Improvements */
  header div[style*="fontSize"]:first-child {
    font-size: 1.875rem !important;
    font-weight: 700 !important;
    color: var(--text-primary) !important;
    cursor: pointer !important;
    white-space: nowrap !important;
    overflow: hidden !important;
    text-overflow: ellipsis !important;
  }

  /* Mobile Navigation Menu Overlay */
  .fixed.inset-0.z-40 {
    background: var(--surface-0) !important;
    backdrop-filter: blur(30px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(30px) saturate(180%) !important;
  }

  /* Mobile Navigation Items */
  .fixed.inset-0.z-40 button {
    background: var(--surface-glass) !important;
    backdrop-filter: blur(25px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(25px) saturate(180%) !important;
    border: 1px solid rgba(128, 128, 128, 0.2) !important;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1) !important;
  }

  [data-theme='light'] .fixed.inset-0.z-40 button {
    background: rgba(255, 255, 255, 0.9) !important;
    border: 1px solid rgba(0, 0, 0, 0.08) !important;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.06) !important;
  }

  /* Mobile Calculator Container - Updated for New Glassmorphism Design */
  .calculator-glass-container {
    padding: 1.5rem !important;
    margin: 0 auto !important;
    margin-left: auto !important;
    margin-right: auto !important;
    border-radius: 24px !important;
    background: linear-gradient(135deg, 
      rgba(255, 255, 255, 0.12) 0%, 
      rgba(255, 255, 255, 0.06) 100%) !important;
    backdrop-filter: blur(20px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(20px) saturate(180%) !important;
    max-width: calc(100vw - 2rem) !important;
    width: calc(100vw - 2rem) !important;
    box-sizing: border-box !important;
    overflow-x: hidden !important;
  }

  /* Mobile Income Input Section */
  .income-input-section {
    margin-bottom: 1.5rem !important;
    padding: 1.25rem !important;
    border-radius: 20px !important;
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
    overflow-x: hidden !important;
  }

  .income-value {
    font-size: 2rem !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
  }

  .slider-container {
    margin-bottom: 1rem !important;
    width: 100% !important;
    max-width: 100% !important;
    overflow-x: hidden !important;
  }

  .slider-labels {
    width: 100% !important;
    max-width: 100% !important;
    overflow-x: hidden !important;
  }

  .slider-labels span {
    font-size: 0.75rem !important;
    white-space: nowrap !important;
    overflow: hidden !important;
  }

  .income-manual-input {
    width: 160px !important;
    max-width: calc(100vw - 4rem) !important;
    font-size: 1rem !important;
    box-sizing: border-box !important;
  }

  /* Mobile Results Grid */
  .results-grid {
    grid-template-columns: 1fr !important;
    gap: 1rem !important;
    width: 100% !important;
    max-width: 100% !important;
    overflow-x: hidden !important;
  }

  /* Mobile Impact Summary Card */
  .impact-summary-card {
    padding: 1.25rem !important;
    border-radius: 16px !important;
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
    overflow-x: hidden !important;
  }

  .bracket-title {
    font-size: 1.125rem !important;
    margin-bottom: 1rem !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
  }

  .impact-timeline {
    grid-template-columns: 1fr !important;
    gap: 0.75rem !important;
    width: 100% !important;
    max-width: 100% !important;
  }

  .impact-period {
    padding: 0.75rem !important;
    width: 100% !important;
    max-width: 100% !important;
    box-sizing: border-box !important;
  }

  .impact-amount {
    font-size: 1.25rem !important;
    word-break: break-word !important;
    overflow-wrap: break-word !important;
  }

  /* Mobile Details Section */
  .general-details {
    padding: 1.25rem !important;
    border-radius: 16px !important;
  }

  .details-title {
    font-size: 1rem !important;
  }

  .details-list li,
  .effects-list li {
    font-size: 0.8125rem !important;
  }

  /* Mobile Thermometers */
  .thermometers-container {
    gap: 1rem !important;
    padding: 0.75rem !important;
  }

  .thermometer-container {
    height: 180px !important;
    width: 36px !important;
  }

  .thermometer-label {
    font-size: 0.75rem !important;
  }

  .status-text {
    font-size: 0.75rem !important;
  }

  .thermometer-value {
    font-size: 0.75rem !important;
  }

  /* Legacy Calculator Grid Override */
  .calculator-grid {
    display: none !important;
  }

  /* Mobile Range Slider - Apple Style */
  input[type="range"] {
    width: 100% !important;
    height: 8px !important;
    margin: 1.5rem 0 !important;
    -webkit-appearance: none !important;
    appearance: none !important;
    background: rgba(255, 255, 255, 0.2) !important;
    border-radius: 4px !important;
    outline: none !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2) inset !important;
  }
  
  input[type="range"]::-webkit-slider-thumb {
    -webkit-appearance: none !important;
    appearance: none !important;
    height: 32px !important;
    width: 32px !important;
    border-radius: 50% !important;
    background: linear-gradient(135deg, #007AFF 0%, #5856D6 100%) !important;
    border: 3px solid rgba(255, 255, 255, 0.9) !important;
    cursor: pointer !important;
    box-shadow: 
      0 6px 16px rgba(0, 122, 255, 0.4),
      0 2px 4px rgba(0, 0, 0, 0.2) !important;
    transition: all 0.2s ease !important;
  }
  
  input[type="range"]::-webkit-slider-thumb:active {
    transform: scale(1.15) !important;
    box-shadow: 
      0 8px 20px rgba(0, 122, 255, 0.6),
      0 2px 4px rgba(0, 0, 0, 0.3) !important;
  }

  /* Mobile Input Field - Theme Aware */
  input[type="text"], input[type="number"] {
    width: 100% !important;
    padding: 1rem 1.25rem !important;
    background: var(--surface-1) !important;
    border: 1px solid rgba(128, 128, 128, 0.3) !important;
    border-radius: 16px !important;
    color: var(--text-primary) !important;
    font-size: 1.125rem !important;
    font-weight: 500 !important;
    text-align: center !important;
    backdrop-filter: blur(20px) !important;
    margin-top: 1rem !important;
  }

  input[type="text"]:focus, input[type="number"]:focus {
    outline: none !important;
    border-color: #007AFF !important;
    box-shadow: 0 0 0 3px rgba(0, 122, 255, 0.2) !important;
  }

  /* Mobile Results Cards - Updated for New Design */
  .glass-card {
    width: 100% !important;
    max-width: none !important;
    min-width: 0 !important;
    min-height: auto !important;
    margin: 0 0 1.25rem 0 !important;
    padding: 2rem 1.5rem !important;
    
    background: var(--surface-glass) !important;
    backdrop-filter: blur(40px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(40px) saturate(180%) !important;
    border: 1px solid rgba(128, 128, 128, 0.25) !important;
    border-radius: 24px !important;
    box-shadow: 
      0 20px 40px rgba(0, 0, 0, 0.2),
      0 1px 1px rgba(255, 255, 255, 0.1) inset !important;
  }

  .glass-card::before {
    background: linear-gradient(90deg, 
      rgba(255,255,255,0.6) 0%, 
      rgba(255,255,255,0.2) 50%, 
      transparent 100%) !important;
  }

  /* Mobile Card Typography - Theme Aware */
  .glass-card h3,
  .glass-card .impact-title {
    font-size: 1.25rem !important;
    font-weight: 700 !important;
    color: var(--text-primary) !important;
    text-align: center !important;
    margin-bottom: 0.875rem !important;
    letter-spacing: -0.01em !important;
  }

  .glass-card p,
  .glass-card .impact-desc {
    font-size: 1rem !important;
    color: var(--text-secondary) !important;
    text-align: center !important;
    line-height: 1.6 !important;
    margin-bottom: 1.25rem !important;
  }

  .glass-card .impact-source {
    font-size: 0.875rem !important;
    color: var(--text-secondary) !important;
    opacity: 0.7 !important;
    text-align: center !important;
    margin-top: 0.75rem !important;
    font-style: italic !important;
  }

  /* Mobile Financial Values - Enhanced */
  .glass-card .text-2xl,
  .glass-card .text-3xl,
  .glass-card .text-4xl {
    font-size: 1.75rem !important;
    font-weight: 800 !important;
    text-align: center !important;
    margin: 0.75rem 0 !important;
    letter-spacing: -0.02em !important;
  }

  /* Green/Red value styling with glow */
  .text-green-400, .text-green-500 {
    color: #34D399 !important;
    text-shadow: 0 0 12px rgba(52, 211, 153, 0.4) !important;
  }

  .text-red-400, .text-red-500 {
    color: #F87171 !important;
    text-shadow: 0 0 12px rgba(248, 113, 113, 0.4) !important;
  }

  /* Mobile Grid Layout Fixes */
  .grid {
    display: flex !important;
    flex-direction: column !important;
    gap: 1.25rem !important;
  }

  .grid-cols-2 {
    display: flex !important;
    flex-direction: column !important;
    gap: 1.25rem !important;
  }

  /* Container adjustments */
  .container {
    width: 100% !important;
    max-width: 100vw !important;
    padding: 0 1rem !important;
    margin: 0 auto !important;
    box-sizing: border-box !important;
    overflow-x: hidden !important;
  }

  /* Force max-width on common layout elements */
  .max-w-6xl, .max-w-5xl, .max-w-4xl, .max-w-3xl, .max-w-2xl, .max-w-xl {
    max-width: calc(100vw - 2rem) !important;
    width: calc(100vw - 2rem) !important;
    margin-left: auto !important;
    margin-right: auto !important;
    padding-left: 1rem !important;
    padding-right: 1rem !important;
    box-sizing: border-box !important;
  }

  /* Prevent wide tables or code blocks from causing horizontal scroll */
  table, pre, code {
    max-width: 100% !important;
    overflow-x: auto !important;
    word-break: break-word !important;
  }

  /* Ensure images don't cause horizontal scroll */
  img, svg, video {
    max-width: 100% !important;
    height: auto !important;
  }

  /* Mobile Section Spacing */
  section {
    padding: 2rem 0 !important;
  }

  /* Override Tailwind py-32 on mobile */
  .py-32 {
    padding-top: clamp(120px, 20vh, 140px) !important;
    padding-bottom: clamp(2rem, 8vw, 4rem) !important;
  }

  /* Ensure proper spacing for all sections after hero */
  section:not(#hero) {
    padding: 2rem 0 !important;
  }

  /* Hide desktop elements on mobile */
  .desktop-only {
    display: none !important;
  }

  /* Show mobile elements */
  .mobile-only {
    display: block !important;
  }

  /* Mobile Smooth Animations */
  * {
    -webkit-overflow-scrolling: touch !important;
    transition: all 0.2s ease !important;
  }

  /* Mobile Button Enhancements */
  button {
    padding: 1rem 1.5rem !important;
    border-radius: 16px !important;
    font-weight: 600 !important;
    font-size: 1rem !important;
    touch-action: manipulation !important;
    -webkit-touch-callout: none !important;
    -webkit-user-select: none !important;
    user-select: none !important;
    background: linear-gradient(135deg, #007AFF 0%, #5856D6 100%) !important;
    border: none !important;
    color: white !important;
    box-shadow: 0 6px 16px rgba(0, 122, 255, 0.3) !important;
  }

  button:active {
    transform: scale(0.95) !important;
  }

  /* Mobile range labels - Theme Aware */
  .text-sm.text-gray-400 {
    color: var(--text-secondary) !important;
    opacity: 0.7 !important;
    font-size: 0.875rem !important;
    text-align: center !important;
  }

  /* Mobile specific year labels - Theme Aware */
  .font-bold {
    font-weight: 700 !important;
    color: var(--text-primary) !important;
  }

  /* Enhance mobile cliff warning */
  .text-red-600 {
    color: #FF453A !important;
    background: rgba(255, 69, 58, 0.1) !important;
    padding: 0.5rem 1rem !important;
    border-radius: 12px !important;
    border: 1px solid rgba(255, 69, 58, 0.3) !important;
    text-align: center !important;
    font-weight: 600 !important;
  }

  /* Mobile Section Background - Theme Aware */
  section#income-impact {
    background: var(--surface-0) !important;
    padding: 0 !important;
    margin: 0 !important;
  }

  /* Mobile Section Container */
  section#income-impact .calculator-grid {
    background: transparent !important;
  }

  /* Mobile Text Enhancement - Theme Aware */
  .text-brand-blue {
    color: #007AFF !important;
    text-shadow: 0 0 8px rgba(0, 122, 255, 0.3) !important;
  }

  .text-neutral-dark {
    color: var(--text-secondary) !important;
  }

  /* Mobile Theme Toggle Enhancements - In Mobile Menu */
  .fixed.inset-0.z-40 .theme-toggle-button {
    min-height: 40px !important;
    min-width: 40px !important;
    padding: 0.5rem 1rem !important;
    font-size: 14px !important;
    border-radius: 20px !important;
    background: var(--surface-1) !important;
    backdrop-filter: blur(15px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(15px) saturate(180%) !important;
    border: 1px solid rgba(128, 128, 128, 0.2) !important;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1) !important;
  }

  .fixed.inset-0.z-40 .theme-toggle-button:active {
    transform: scale(0.95) !important;
    background: var(--surface-glass) !important;
  }

  .fixed.inset-0.z-40 .theme-toggle-button span {
    font-size: 14px !important;
    font-weight: 500 !important;
    color: var(--text-primary) !important;
  }

  /* Mobile Header - Remove desktop theme toggle padding */
  header div[class*="flex items-center"]:last-child {
    gap: 0.5rem !important;
  }

  /* Mobile Menu Theme Section */
  .fixed.inset-0.z-40 nav > div:first-child {
    background: var(--surface-glass) !important;
    backdrop-filter: blur(25px) saturate(180%) !important;
    -webkit-backdrop-filter: blur(25px) saturate(180%) !important;
    border: 1px solid rgba(128, 128, 128, 0.2) !important;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1) !important;
    animation: fadeInUp 0.3s ease-out 0s both !important;
  }

  [data-theme='light'] .fixed.inset-0.z-40 nav > div:first-child {
    background: rgba(255, 255, 255, 0.9) !important;
    border: 1px solid rgba(0, 0, 0, 0.08) !important;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.06) !important;
  }

  /* Mobile Menu Hamburger Icon Enhancement */
  button[aria-label="Toggle mobile menu"] svg {
    stroke-width: 2.5 !important;
    transition: all 0.2s ease !important;
  }

  /* Final horizontal scroll prevention safety net */
  #__next, [data-reactroot], main {
    overflow-x: hidden !important;
    max-width: 100vw !important;
    width: 100% !important;
  }

  /* Prevent any element from breaking out */
  * {
    max-width: 100vw !important;
  }

  /* Force constraint on flexbox and grid containers */
  .flex, .grid, [style*="display: flex"], [style*="display: grid"] {
    max-width: 100% !important;
    overflow-x: hidden !important;
  }
}

/* Light Theme Mobile Adjustments - Updated for New Design */
@media (max-width: 768px) and (orientation: portrait), 
       (max-width: 1024px) and (orientation: landscape) and (pointer: coarse) {
  
  [data-theme='light'] .calculator-glass-container {
    background: linear-gradient(135deg, 
      rgba(255, 255, 255, 0.18) 0%, 
      rgba(248, 248, 248, 0.12) 100%) !important;
    border: 1px solid rgba(0, 0, 0, 0.08) !important;
    box-shadow: 0 24px 48px rgba(0, 0, 0, 0.1) !important;
  }

  [data-theme='light'] .income-input-section,
  [data-theme='light'] .impact-summary-card,
  [data-theme='light'] .general-details {
    background: linear-gradient(135deg, 
      rgba(255, 255, 255, 0.15) 0%, 
      rgba(255, 255, 255, 0.08) 100%) !important;
    border: 1px solid rgba(0, 0, 0, 0.1) !important;
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08) !important;
  }

  [data-theme='light'] .glass-card {
    background: rgba(255, 255, 255, 0.9) !important;
    border: 1px solid rgba(0, 0, 0, 0.08) !important;
    box-shadow: 
      0 20px 40px rgba(0, 0, 0, 0.06),
      0 1px 1px rgba(255, 255, 255, 0.9) inset !important;
  }

  [data-theme='light'] input[type="text"], 
  [data-theme='light'] input[type="number"] {
    background: rgba(248, 248, 248, 0.8) !important;
    border: 1px solid rgba(0, 0, 0, 0.15) !important;
    color: #1c1c1e !important;
  }

  [data-theme='light'] input[type="range"] {
    background: rgba(0, 0, 0, 0.1) !important;
  }

  [data-theme='light'] .theme-toggle-button {
    background: rgba(255, 255, 255, 0.9) !important;
    border: 1px solid rgba(0, 0, 0, 0.1) !important;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.06) !important;
  }

  [data-theme='light'] .theme-toggle-button:active {
    background: rgba(248, 248, 248, 0.9) !important;
  }
}